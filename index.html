<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

<script>
var AccessToken = "";
var UserID = "";
window.fbAsyncInit = function() {
    FB.init({
        appId : '1398459810400805',
        xfbml : true,
        version : 'v2.2',
        oauth : true
    });
    FB.getLoginStatus (function (response){
            if(response.status == "connected"){
                AccessToken = response.authResponse.accessToken;
                UserID = response.authResponse.userID;
                console.log(AccessToken);
                console.log("user id :"+UserID);
            }
    });
    FB.login(function(response){
        if(response.authResponse){
            alert("OK");
        }else{
            alert("canceled");
        }
    },{
        scope: 'publish_actions,publish_stream,email,public_profile,read_stream,user_photos',
        return_scopes:true
    });
};

(function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1596131740607282&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);

}(document, 'script', 'facebook-jssdk'));</script>

<script>
function GetData(){
	var PicData;
    $.ajax({
        type : "GET",
        url : "https://graph.facebook.com/me?fields=id,photos&access_token="+AccessToken,
        async : true,
        cache : false,
        success : function(data){
			PicData = data;
			$.post("WriteData.php",{data:PicData},
			function(data){
				console.log("hello"+data);
			});
            document.write(JSON.stringify(data));
        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
            console.log("error: " + textStatus + "(" + errorThrown + ")");
        }
    });
}

</script>

<div class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="true" data-auto-logout-link="true"></div>
<button onclick="GetData()">test</button>
</body>

</html>
